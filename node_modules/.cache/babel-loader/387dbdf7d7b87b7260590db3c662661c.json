{"ast":null,"code":"/** PURE_IMPORTS_START _Observable,_scheduler_async,_util_isNumeric,_util_isScheduler PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { async } from '../scheduler/async';\nimport { isNumeric } from '../util/isNumeric';\nimport { isScheduler } from '../util/isScheduler';\nexport function timer(dueTime, periodOrScheduler, scheduler) {\n  if (dueTime === void 0) {\n    dueTime = 0;\n  }\n  var period = -1;\n  if (isNumeric(periodOrScheduler)) {\n    period = Number(periodOrScheduler) < 1 && 1 || Number(periodOrScheduler);\n  } else if (isScheduler(periodOrScheduler)) {\n    scheduler = periodOrScheduler;\n  }\n  if (!isScheduler(scheduler)) {\n    scheduler = async;\n  }\n  return new Observable(function (subscriber) {\n    var due = isNumeric(dueTime) ? dueTime : +dueTime - scheduler.now();\n    return scheduler.schedule(dispatch, due, {\n      index: 0,\n      period: period,\n      subscriber: subscriber\n    });\n  });\n}\nfunction dispatch(state) {\n  var index = state.index,\n    period = state.period,\n    subscriber = state.subscriber;\n  subscriber.next(index);\n  if (subscriber.closed) {\n    return;\n  } else if (period === -1) {\n    return subscriber.complete();\n  }\n  state.index = index + 1;\n  this.schedule(state, period);\n}","map":{"version":3,"mappings":"AAAA;AAEA,SAASA,UAAO,QAAM,eAAoB;AAC1C,SAASC,aAAW,oBAAM;AAC1B,SAASC,iBAAa,mBAAM;AAqD5B,SAAMC,WAAU,QAAM,qBAC0C;OAD1C,yCAA0B;EAG9C,IAAIC,OAAM,KAAM;IACZA,UAAU;;MAEbC;eAAU,kBAAY;IACrBA,SAASC,MAAG,kBAAyB;GACtC,MAEI,eAAY,kBAAY;IAC3BC,SAAS,GAAGC,iBAAM;;EAGpB,gBAAW,UAAW;IACpBD,SAAS,GAAGN;;aAEPD,UAAQ,CAAG,UAAUS,UAAO;IAEjC,OAAO,YAAU,QAAS,IACxBL,OAAQ,GACP;IACF;MACJM;MAAAL;MAAAI;IAQD,CAAS;EACC;;SAGJE,SAAUC,KAAC,EAAM;MACnBF,QAAOE;IAAAP;IAAAI;YACR;gBAAU,CAAMI,MAAM,EAAC;IACtB;GACD,MAEI,IAACR,MAAQ,KAAK,EAAG,EAAE;IACpB,OAACI,UAAgB,SAAQ;EAC9B","names":["Observable","async","isNumeric","isScheduler","dueTime","period","Number","scheduler","periodOrScheduler","subscriber","index","dispatch","state","closed"],"sources":["../../../src/internal/observable/timer.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}