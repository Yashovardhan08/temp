{"ast":null,"code":"/** PURE_IMPORTS_START tslib,_scheduler_async,_util_isDate,_innerSubscribe PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { async } from '../scheduler/async';\nimport { isDate } from '../util/isDate';\nimport { SimpleOuterSubscriber, innerSubscribe, SimpleInnerSubscriber } from '../innerSubscribe';\nexport function timeoutWith(due, withObservable, scheduler) {\n  if (scheduler === void 0) {\n    scheduler = async;\n  }\n  return function (source) {\n    var absoluteTimeout = isDate(due);\n    var waitFor = absoluteTimeout ? +due - scheduler.now() : Math.abs(due);\n    return source.lift(new TimeoutWithOperator(waitFor, absoluteTimeout, withObservable, scheduler));\n  };\n}\nvar TimeoutWithOperator = /*@__PURE__*/function () {\n  function TimeoutWithOperator(waitFor, absoluteTimeout, withObservable, scheduler) {\n    this.waitFor = waitFor;\n    this.absoluteTimeout = absoluteTimeout;\n    this.withObservable = withObservable;\n    this.scheduler = scheduler;\n  }\n  TimeoutWithOperator.prototype.call = function (subscriber, source) {\n    return source.subscribe(new TimeoutWithSubscriber(subscriber, this.absoluteTimeout, this.waitFor, this.withObservable, this.scheduler));\n  };\n  return TimeoutWithOperator;\n}();\nvar TimeoutWithSubscriber = /*@__PURE__*/function (_super) {\n  tslib_1.__extends(TimeoutWithSubscriber, _super);\n  function TimeoutWithSubscriber(destination, absoluteTimeout, waitFor, withObservable, scheduler) {\n    var _this = _super.call(this, destination) || this;\n    _this.absoluteTimeout = absoluteTimeout;\n    _this.waitFor = waitFor;\n    _this.withObservable = withObservable;\n    _this.scheduler = scheduler;\n    _this.scheduleTimeout();\n    return _this;\n  }\n  TimeoutWithSubscriber.dispatchTimeout = function (subscriber) {\n    var withObservable = subscriber.withObservable;\n    subscriber._unsubscribeAndRecycle();\n    subscriber.add(innerSubscribe(withObservable, new SimpleInnerSubscriber(subscriber)));\n  };\n  TimeoutWithSubscriber.prototype.scheduleTimeout = function () {\n    var action = this.action;\n    if (action) {\n      this.action = action.schedule(this, this.waitFor);\n    } else {\n      this.add(this.action = this.scheduler.schedule(TimeoutWithSubscriber.dispatchTimeout, this.waitFor, this));\n    }\n  };\n  TimeoutWithSubscriber.prototype._next = function (value) {\n    if (!this.absoluteTimeout) {\n      this.scheduleTimeout();\n    }\n    _super.prototype._next.call(this, value);\n  };\n  TimeoutWithSubscriber.prototype._unsubscribe = function () {\n    this.action = undefined;\n    this.scheduler = null;\n    this.withObservable = null;\n  };\n  return TimeoutWithSubscriber;\n}(SimpleOuterSubscriber);","map":{"version":3,"mappings":";AAEA,OAAO,KAAEA,OAAO,MAAM;AAEtB,SAASC,aAAQ,oBAAuB;AAExC,SAASC,8BAAuB;AA2DhC,SAAMC,qBAA4B,EAAkBC,cAClB,EAAkCC,qBACF;OAAhC,0CAAgCC;EAChE,aAAO,KAAC,KAAqB;IAC3BA,SAAI;;SAEJ,UAAaC,MAAM;IACnB;IACH;IAED;EACE;;uBACoB,4BAAwB;WACxBC,4CAAoC;IACpC,eAASC,OAAT;IACnB;IAED;IACE,cAAc,YAAU;EAG1B;EACFD,6BAAC;IAAA;EAOD;EAA0C;GAIxC;yBAKE,gBAAM,UAAYE,MAEnB;SANmB,wCAAwB;WACxBC,qBAAe;IACf,yCAAoC;IACpCC,uCAAwB;IAE1CA,KAAI,CAACH,iBAAiB;;IACvBG;IAEcA;IACL;;uBAEO,gBAAe,aAAgBC,UAAI;IACnD;IAEOA;IACEA,6BAAgB;;uBAOX,CAAmDC,SAAO,gBAAe,GAAK,YAAU;QACpGC;cAAM;MACL,IAAI,CAACA,MAAI,GAAKA,MAAM,SAAwD,WAAU,QACpF;KAEH,MACF;MAES,qCAAV,SAAgB,CAAQJ;IACtB;;uBAEC;IACD,yBAAW;MACZ;IAGD;IACED,MAAK,UAAS,OAASM,IAAC;;uBAEnB,UAAuB;IAC7B;IACH;IAhD0C,mBAgDzC","names":["tslib_1","async","isDate","SimpleOuterSubscriber","innerSubscribe","SimpleInnerSubscriber","scheduler","source","TimeoutWithOperator","waitFor","_super","TimeoutWithSubscriber","_this","subscriber","prototype","action","call"],"sources":["../../../src/internal/operators/timeoutWith.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}